{% extends 'conf/base.html' %}

{% load i18n static %}
{% load socialaccount %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
    <div class="container">
        <h1 class="center page-heading">{{ page_title }}</h1>

        {% if form.accounts %}
            <div class="row">
                <div class="col s12 m6 offset-m3 l6 offset-l3">
                    {% trans 'You can sign in to your account using any of the following third party accounts:' %}
                </div>
            </div>

            <div class="row">
                <form method="post" action="{% url 'socialaccount_connections' %}"
                      class="col s12 m6 offset-m3 l6 offset-l3">
                    {% csrf_token %}

                    {% if form.non_field_errors %}
                        <div class="deep-orange-text mb-4">{{ form.non_field_errors }}</div>
                    {% endif %}

                    {% for base_account in form.accounts %}
                        {% with base_account.get_provider_account as account %}
                            <div class="row">
                                <p class="col s12">
                                    <label for="id_account_{{ base_account.id }}">
                                        <input id="id_account_{{ base_account.id }}"
                                               type="radio"
                                               name="account"
                                               value="{{ base_account.id }}"
                                               class="with-gap"/>
                                        <span class="socialaccount_provider {{ base_account.provider }} {{ account.get_brand.id }}">
                                            {{ account.get_brand.name }}
                                        </span>
                                        {{ account }}
                                    </label>
                                </p>
                            </div>
                        {% endwith %}
                    {% endfor %}

                    <div class="row">
                        <div class="col s12">
                            <button type="submit"
                                    class="btn waves-effect waves-light btn-small deep-orange darken-4">
                                <i class="fas fa-times"></i>
                                {% trans 'Remove' %}
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        {% else %}
            <div class="row">
                <div class="col s12 m6 offset-m3 l6 offset-l3">
                    {% trans 'You currently have no social network accounts connected to this account.' %}
                </div>
            </div>
        {% endif %}

        <h2 class="center page-heading">{% trans 'Add a 3rd Party Account' %}</h2>

        <div class="row">
            <div class="col s12 m6 offset-m3 l6 offset-l3">
                <div class="divider"></div>
            </div>
        </div>
        <div class="row">
            <div class="col s12 m6 offset-m3 l6 offset-l3">
                <div class="row">
                    <div class="col s12 m3 l3">
                        <a href="{% provider_login_url 'line' process='connect' scope=scope auth_params=auth_params %}"
                           class="btn sns-button sns-button-line z-depth-2 waves-effect waves-light">
                            <i class="fab fa-line fa-4x"></i>
                        </a>
                    </div>
                    <div class="col s12 m3 l3">
                        <a href="{% provider_login_url 'facebook' process='connect' scope=scope auth_params=auth_params %}"
                           class="btn sns-button sns-button-facebook z-depth-2 waves-effect waves-light">
                            <i class="fab fa-facebook-square fa-4x"></i>
                        </a>
                    </div>
                    <div class="col s12 m3 l3">
                        <a href="{% provider_login_url 'google' process='connect' scope=scope auth_params=auth_params %}"
                           class="btn sns-button sns-button-google z-depth-2 waves-effect waves-light">
                            <i class="fab fa-google-plus-square fa-4x"></i>
                        </a>
                    </div>
                    <div class="col s12 m3 l3">
                        <a href="{% provider_login_url 'github' process='connect' scope=scope auth_params=auth_params %}"
                           class="btn sns-button sns-button-github z-depth-2 waves-effect waves-light">
                            <i class="fab fa-github-square fa-4x"></i>
                        </a>
                    </div>
                    {% providers_media_js %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block stylesheet %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static "member/css/member.css" %}">
{% endblock %}